================================================================================
FULL PERIOD BACKTEST: OPPORTUNITY GATING with 4x LEVERAGE
================================================================================

Testing with LEVERAGE and DYNAMIC SIZING

Loading Entry models (Enhanced with 5-fold CV - 20251024_012445)...
Loading Exit models (Enhanced - 20251023_212712)...
  ✅ Entry models loaded: LONG(85), SHORT(79)
  ✅ Exit models loaded: LONG(47), SHORT(47)

Loading FULL historical data...
  ✅ Full data loaded: 32,841 candles (~114 days)

Calculating ALL features (Enhanced v2 + EXIT)...
================================================================================
ENHANCED FEATURE CALCULATION V2
================================================================================

Step 1/4: Calculating baseline features (LONG + SHORT)...
Calculating ALL features (LONG + SHORT)...
  1/4 Calculating LONG basic features...
  2/4 Calculating LONG advanced features...
  3/4 Calculating SHORT features...
  4/4 Cleaning NaN values...
  ✅ All features calculated (32841 rows)
  ✅ Baseline: 107 features

Step 2/4: Calculating long-term features (200-period)...
  ✅ Long-term: 23 features

Step 3/4: Calculating advanced indicators (phase1)...
  [1/3] Calculating Volume Profile (7 features)...
  [2/3] Calculating VWAP (4 features)...

✅ Advanced indicators calculated:
   - Volume Profile: 7 features
   - VWAP: 4 features
   - Total: 11 features
   - Rows: 32,841 → 32,554 (lost 287 due to lookback)
  ✅ Advanced: 11 features (VP 7 + VWAP 4)

Step 4/4: Calculating engineered ratio features...
  ✅ Ratios: 24 features

Cleaning NaN values...

================================================================================
FEATURE CALCULATION COMPLETE
================================================================================

✅ Total features: 165
   - Baseline: 107
   - Long-term: 23
   - Advanced: 11 (VP + VWAP)
   - Engineered ratios: 24

✅ Data coverage: 32,549 / 32,841 rows
   Lost 292 rows due to lookback periods


Calculating enhanced market context features...
✅ Enhanced features calculated
  ✅ All features calculated (170.3s)

Pre-calculating signals...
  ✅ Signals pre-calculated (0.1s)

================================================================================
RUNNING BACKTEST with 4x LEVERAGE + DYNAMIC SIZING
================================================================================

