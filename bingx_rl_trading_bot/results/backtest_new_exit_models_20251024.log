================================================================================
FULL PERIOD BACKTEST: OPPORTUNITY GATING with 4x LEVERAGE
================================================================================

Testing with LEVERAGE and DYNAMIC SIZING

Loading Entry models (Enhanced with 5-fold CV - 20251024_012445)...
Loading Exit models (Retrained - 20251024_043527/044510)...
  âœ… Entry models loaded: LONG(85), SHORT(79)
  âœ… Exit models loaded: LONG(27), SHORT(27)

Loading FULL historical data...
  âœ… Full data loaded: 32,841 candles (~114 days)

Calculating ALL features (Enhanced v2 + EXIT)...
================================================================================
ENHANCED FEATURE CALCULATION V2
================================================================================

Step 1/4: Calculating baseline features (LONG + SHORT)...
Calculating ALL features (LONG + SHORT)...
  1/4 Calculating LONG basic features...
  2/4 Calculating LONG advanced features...
  3/4 Calculating SHORT features...
  4/4 Cleaning NaN values...
  âœ… All features calculated (32841 rows)
  âœ… Baseline: 107 features

Step 2/4: Calculating long-term features (200-period)...
  âœ… Long-term: 23 features

Step 3/4: Calculating advanced indicators (phase1)...
  [1/3] Calculating Volume Profile (7 features)...
  [2/3] Calculating VWAP (4 features)...

âœ… Advanced indicators calculated:
   - Volume Profile: 7 features
   - VWAP: 4 features
   - Total: 11 features
   - Rows: 32,841 â†’ 32,554 (lost 287 due to lookback)
  âœ… Advanced: 11 features (VP 7 + VWAP 4)

Step 4/4: Calculating engineered ratio features...
  âœ… Ratios: 24 features

Cleaning NaN values...

================================================================================
FEATURE CALCULATION COMPLETE
================================================================================

âœ… Total features: 165
   - Baseline: 107
   - Long-term: 23
   - Advanced: 11 (VP + VWAP)
   - Engineered ratios: 24

âœ… Data coverage: 32,549 / 32,841 rows
   Lost 292 rows due to lookback periods


Calculating enhanced market context features...
âœ… Enhanced features calculated
  âœ… All features calculated (176.0s)

Pre-calculating signals...
  âœ… Signals pre-calculated (0.1s)

================================================================================
RUNNING BACKTEST with 4x LEVERAGE + DYNAMIC SIZING
================================================================================


================================================================================
FULL PERIOD BACKTEST RESULTS (4x LEVERAGE) - INDEPENDENT WINDOW TESTING
================================================================================

Performance (Each window starts with $10,000):
  Avg Window Return: 21.76% per window
  Win Rate: 58.5%
  Trades: 44.4 per window (LONG 27.1 + SHORT 17.3)
  Avg Position Size: 49.3%
  Windows: 108
  Test Time: 66.2s

ðŸ“Š Capital Summary:
  Starting Capital (per window): $10,000.00
  Avg Final Capital (per window): $12,176.06
  Last Window Result: $16,083.63 (+60.84%)

ðŸ“ˆ Annualized Performance (from avg window return):
  Annualized Return: 174575900.0%
  (Based on 108 windows over 540 days)

ðŸ’° After Transaction Costs:
  Cost per trade: 0.07%
  Cost per window: 3.11%
  Net window return: 18.65% per window

ðŸ“ˆ Leverage Impact:
  With 4x Leverage: 21.76% per window
  Without Leverage (est): 5.44% per window
  Leverage Multiplier: 4.00x

ðŸšª EXIT REASON ANALYSIS:
  Total Trades: 4798
    ML Exit (LONG)           : 2883 ( 60.1%)
    ML Exit (SHORT)          : 1825 ( 38.0%)
    Emergency Max Hold       :   85 (  1.8%)
    Emergency Stop Loss      :    5 (  0.1%)

  Exit by Side:
    LONG Exits (2932 trades):
      ML Exit             : 2883 ( 98.3%)
      Max Hold            :   48 (  1.6%)
      Stop Loss           :    1 (  0.0%)
    SHORT Exits (1866 trades):
      ML Exit             : 1825 ( 97.8%)
      Max Hold            :   37 (  2.0%)
      Stop Loss           :    4 (  0.2%)

âœ… Results saved to: C:\Users\J\OneDrive\CLAUDE_CODE_FIN\bingx_rl_trading_bot\results\full_backtest_opportunity_gating_4x_20251024_045033.csv

================================================================================
BACKTEST COMPLETE
================================================================================

