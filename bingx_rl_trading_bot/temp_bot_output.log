2025-10-27 00:02:16,405 - INFO - ================================================================================
2025-10-27 00:02:16,405 - INFO - OPPORTUNITY GATING BOT (4x LEVERAGE) - STARTING
2025-10-27 00:02:16,405 - INFO - ================================================================================
2025-10-27 00:02:16,405 - INFO - Loading models...
2025-10-27 00:02:16,546 - INFO -   âœ… Models loaded
2025-10-27 00:02:16,546 - INFO -      LONG Entry features: 85
2025-10-27 00:02:16,546 - INFO -      SHORT Entry features: 79
2025-10-27 00:02:16,547 - INFO -      LONG Exit features: 27
2025-10-27 00:02:16,547 - INFO -      SHORT Exit features: 27
2025-10-27 00:02:16,547 - INFO -   âœ… Dynamic Position Sizer initialized
2025-10-27 00:02:16,547 - INFO - ğŸ” Checking for duplicate bot instances...
2025-10-27 00:02:16,547 - INFO -    Lock file found: C:\Users\J\OneDrive\CLAUDE_CODE_FIN\bingx_rl_trading_bot\results\opportunity_gating_bot_4x.lock
2025-10-27 00:02:16,555 - INFO -    Lock file PID: 35268 (age: 50.0s)
2025-10-27 00:02:16,555 - INFO -    Checking if PID 35268 is running...
2025-10-27 00:02:16,556 - INFO -    PID 35268 not running (stale lock file)
2025-10-27 00:02:16,556 - INFO - âœ… Lock file created: PID 30132 at 2025-10-27 00:02:16
2025-10-27 00:02:16,556 - INFO - 
================================================================================
2025-10-27 00:02:16,557 - INFO - BOT CONFIGURATION
2025-10-27 00:02:16,557 - INFO - ================================================================================
2025-10-27 00:02:16,557 - INFO - Strategy: Opportunity Gating + 4x Leverage + COMBINED Exit
2025-10-27 00:02:16,557 - INFO - 
2025-10-27 00:02:16,557 - INFO - Entry:
2025-10-27 00:02:16,557 - INFO -   LONG Threshold: 0.8
2025-10-27 00:02:16,557 - INFO -   SHORT Threshold: 0.8
2025-10-27 00:02:16,557 - INFO -   Gate Threshold: 0.001
2025-10-27 00:02:16,557 - INFO -   Leverage: 4x
2025-10-27 00:02:16,558 - INFO -   Position Sizing: Dynamic (20-95%)
2025-10-27 00:02:16,558 - INFO - 
2025-10-27 00:02:16,558 - INFO - Exit Strategy (ML Exit + Max Hold + Exchange SL):
2025-10-27 00:02:16,558 - INFO - 
2025-10-27 00:02:16,558 - INFO -   Primary Exits (Program-Level):
2025-10-27 00:02:16,558 - INFO -     1. ML Exit Model:
2025-10-27 00:02:16,558 - INFO -        - LONG threshold: 0.80
2025-10-27 00:02:16,558 - INFO -        - SHORT threshold: 0.80
2025-10-27 00:02:16,558 - INFO -     2. Emergency Max Hold: 10.0h
2025-10-27 00:02:16,558 - INFO - 
2025-10-27 00:02:16,559 - INFO -   Emergency Protection (Exchange-Level):
2025-10-27 00:02:16,559 - INFO -     3. Stop Loss: 3.0% total balance (Balance-Based STOP_MARKET)
2025-10-27 00:02:16,559 - INFO -        - Dynamic Price SL: Varies by position size (6% / (size Ã— leverage))
2025-10-27 00:02:16,559 - INFO -        - Example: 50% position â†’ 3.0% price SL, 95% â†’ 1.6% price SL
2025-10-27 00:02:16,559 - INFO -        - Monitoring: Exchange server 24/7
2025-10-27 00:02:16,559 - INFO -        - Protection: Survives bot crashes & network failures
2025-10-27 00:02:16,559 - INFO - 
2025-10-27 00:02:16,559 - INFO -   Note: Fixed TP removed - ML Exit handles all profit-taking
2025-10-27 00:02:16,560 - INFO - ================================================================================

2025-10-27 00:02:16,560 - INFO - Initializing BingX client (Testnet: False)...
[32m2025-10-27 00:02:16.748[0m | [1mINFO    [0m | [36msrc.api.bingx_client[0m:[36m_sync_server_time[0m:[36m72[0m - [1mâœ… Server time synchronized (offset: -4249ms)[0m
[32m2025-10-27 00:02:16.748[0m | [1mINFO    [0m | [36msrc.api.bingx_client[0m:[36m_sync_server_time[0m:[36m82[0m - [1mâœ… Milliseconds method overridden (local time adjusted by 4249ms)[0m
[32m2025-10-27 00:02:16.748[0m | [1mINFO    [0m | [36msrc.api.bingx_client[0m:[36m__init__[0m:[36m60[0m - [1mBingX Client (CCXT) initialized (Mainnet)[0m
2025-10-27 00:02:16,748 - INFO - âœ… Client initialized

2025-10-27 00:02:17,688 - INFO - âœ… Balance initialized: $4,450.59
2025-10-27 00:02:17,688 - INFO -    Baseline: initial_balance=$4,590.67, initial_unrealized=$0.00
2025-10-27 00:02:17,688 - INFO - 
ğŸ”„ Reconciling state from exchange (V2 - Position History API)...
2025-10-27 00:02:17,688 - INFO - ================================================================================
2025-10-27 00:02:17,688 - INFO - ğŸ”„ Reconciling State from Exchange (V2 - Position History API)
2025-10-27 00:02:17,688 - INFO - ================================================================================
2025-10-27 00:02:17,688 - WARNING - âš ï¸  Reconciliation failed: 'str' object cannot be interpreted as an integer
2025-10-27 00:02:17,688 - WARNING - âš ï¸  Continuing without reconciliation...
2025-10-27 00:02:17,688 - INFO - ğŸ’¡ Using 4x internal leverage calculation (no exchange setting modification)
2025-10-27 00:02:17,688 - INFO - 
ğŸ” Checking for existing positions on exchange...
2025-10-27 00:02:17,840 - INFO -    âœ… No existing positions on exchange
2025-10-27 00:02:17,841 - INFO - 
2025-10-27 00:02:17,841 - INFO - â° Bot start time: 2025-10-27 00:02:17
2025-10-27 00:02:17,841 - INFO - â¸ï¸  Warmup period: 5 minutes (entry signals will be ignored)
2025-10-27 00:02:17,841 - INFO - ğŸ• Timing: ì •ê° ë™ê¸°í™” (5ë¶„ ì •ê° +1ì´ˆ) - ì™„ì„±ëœ ìº”ë“¤ë§Œ ì‚¬ìš©
2025-10-27 00:02:17,841 - INFO - ğŸ’° Balance reconciliation enabled (check interval: 1.0h, threshold: 0.005%)
2025-10-27 00:02:17,841 - INFO - ğŸ’µ Fee reconciliation enabled (check interval: 30min, symbol: BTC/USDT:USDT)
2025-10-27 00:02:17,841 - INFO - â° ë‹¤ìŒ ìº”ë“¤ê¹Œì§€ ëŒ€ê¸°:
2025-10-27 00:02:17,841 - INFO -    í˜„ì¬ (KST): 00:02:17
2025-10-27 00:02:17,842 - INFO -    ì •ê° (KST): 00:05:00
2025-10-27 00:02:17,842 - INFO -    ìš”ì²­ (KST): 00:05:01 (ì •ê° +1ì´ˆ)
2025-10-27 00:02:17,842 - INFO -    ëŒ€ê¸°: 164ì´ˆ
C:\Users\J\OneDrive\CLAUDE_CODE_FIN\bingx_rl_trading_bot\scripts\production\opportunity_gating_bot_4x.py:2240: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
  current_time = datetime.utcnow()  # UTC
2025-10-27 00:05:01,865 - INFO - 
================================================================================
2025-10-27 00:05:01,865 - INFO - ğŸ“Š ìº”ë“¤ ë°ì´í„° ìš”ì²­ (API ëª¨ë“œ)
2025-10-27 00:05:01,865 - INFO - ================================================================================
2025-10-27 00:05:01,865 - INFO -    í˜„ì¬ ì‹œê°„: 00:05:01 KST (15:05:01 UTC)
2025-10-27 00:05:01,865 - INFO -    ì˜ˆìƒ ìµœì‹  ìº”ë“¤: 00:05:00 KST (15:05:00 UTC)
2025-10-27 00:05:01,865 - INFO -    ğŸ“¡ Fetching from API...
2025-10-27 00:05:01,866 - INFO - ğŸ” DEBUG fetch_ohlcv: symbol=BTC/USDT:USDT, timeframe=5m, limit=1000, params={}
2025-10-27 00:05:02,021 - INFO -    âœ… ì˜ˆìƒ ìº”ë“¤ ì •í™•íˆ ì¼ì¹˜: 00:05:00 KST (15:05:00 UTC)
2025-10-27 00:05:02,022 - INFO -    ğŸ“Š ìº”ë“¤ í•„í„°ë§ ê²°ê³¼:
2025-10-27 00:05:02,023 - INFO -       ì „ì²´ ìº”ë“¤: 1000 â†’ ì™„ì„± ìº”ë“¤: 999
2025-10-27 00:05:02,023 - INFO -       ìµœì‹  ì™„ì„± ì‹œì‘: 00:00:00 KST (15:00:00 UTC)
2025-10-27 00:05:02,023 - INFO -       ìµœì‹  ì™„ì„± ì¢…ë£Œ: 00:05:00 KST (15:05:00 UTC)
2025-10-27 00:05:02,023 - INFO -       ì˜ˆìƒ ìµœì‹ : 00:00:00 KST (15:00:00 UTC)
2025-10-27 00:05:02,023 - INFO -       ë°ì´í„° ë‚˜ì´ (ì™„ì„± í›„): 0.0ë¶„
2025-10-27 00:05:02,023 - INFO -    âœ… ìµœì‹  ë°ì´í„° í™•ì¸ (ì™„ì„± í›„ 0.0ë¶„)
2025-10-27 00:05:02,023 - INFO -    âœ… ì˜ˆìƒ ìº”ë“¤ê³¼ ì •í™•íˆ ì¼ì¹˜
2025-10-27 00:05:02,023 - INFO - 
================================================================================
2025-10-27 00:05:02,024 - INFO - ğŸ” ìµœì¢… ë°ì´í„° ê²€ì¦
2025-10-27 00:05:02,024 - INFO - ================================================================================
2025-10-27 00:05:02,024 - INFO -    ì´ ìº”ë“¤ ìˆ˜: 999
2025-10-27 00:05:02,024 - INFO -    ì²« ìº”ë“¤ (KST): 2025-10-23 03:50 | $108,370.0
2025-10-27 00:05:02,024 - INFO -    ë§ˆì§€ë§‰ ìº”ë“¤ (KST): 2025-10-26 15:00 | $113,429.1
2025-10-27 00:05:02,024 - INFO -    ì‹œê°„ìˆœ ì •ë ¬: True âœ…
2025-10-27 00:05:02,024 - INFO -    í˜„ì¬ ê°€ê²©: $113,429.1
2025-10-27 00:05:02,024 - INFO -    âœ… ë°ì´í„° ê²€ì¦ ì™„ë£Œ

2025-10-27 00:05:07,718 - INFO - ğŸ” DEBUG - Feature DataFrame Order:
2025-10-27 00:05:07,718 - INFO -    Feature rows: 707
2025-10-27 00:05:07,719 - INFO -    FIRST feature timestamp: 2025-10-24 04:10:00
2025-10-27 00:05:07,719 - INFO -    LAST feature timestamp: 2025-10-26 15:00:00
2025-10-27 00:05:07,719 - INFO -    Feature timestamps ascending: True âœ…
2025-10-27 00:05:07,719 - INFO - ğŸ” DEBUG - Latest Candle Selection:
2025-10-27 00:05:07,719 - INFO -    Selected index: -1 (last row)
2025-10-27 00:05:07,719 - INFO -    Selected candle timestamp: 2025-10-26 15:00:00
2025-10-27 00:05:07,719 - INFO -    Selected candle close: $113,429.1
2025-10-27 00:05:07,722 - INFO - [Candle 15:00:00 KST] Price: $113,429.1 | Balance: $4,450.59 | LONG: 0.1758 | SHORT: 0.2284
2025-10-27 00:05:07,722 - INFO - â¸ï¸  Warmup period: 2.8/5 min - ignoring entry signals
2025-10-27 00:05:07,723 - INFO - â° ë‹¤ìŒ ìº”ë“¤ê¹Œì§€ ëŒ€ê¸°:
2025-10-27 00:05:07,723 - INFO -    í˜„ì¬ (KST): 00:05:07
2025-10-27 00:05:07,723 - INFO -    ì •ê° (KST): 00:10:00
2025-10-27 00:05:07,723 - INFO -    ìš”ì²­ (KST): 00:10:01 (ì •ê° +1ì´ˆ)
2025-10-27 00:05:07,723 - INFO -    ëŒ€ê¸°: 294ì´ˆ
